<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œìŠ¤í…œ ê´€ë¦¬ì</title>
    <script src="auth.js"></script>
    <style>
        body { background: #050a14; color: #eee; font-family: sans-serif; display:none; padding: 20px; }
        body.secure-visible { display: block; }
        .panel { max-width: 500px; margin: auto; background: #111; padding: 30px; border-radius: 20px; border: 1px solid #D4AF37; }
        h2 { color: #D4AF37; border-left: 4px solid #D4AF37; padding-left: 10px; margin-top: 0; }
        label { display: block; margin-top: 20px; font-size: 0.9rem; color: #aaa; }
        input { width: 100%; padding: 15px; margin: 8px 0; background: #222; border: 1px solid #444; color: white; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #D4AF37; color: #000; border: none; font-weight: bold; border-radius: 8px; margin-top: 15px; cursor: pointer; }
        .back-btn { display: block; text-align: center; margin-top: 20px; color: #666; text-decoration: none; }
    </style>
</head>
<body>
    <div class="panel">
        <h2>ğŸ› ï¸ í´ë¼ìš°ë“œ í†µí•© ê´€ë¦¬</h2>

        <label>ë©”ì¸ í™”ë©´ ê³µì§€ì‚¬í•­</label>
        <input type="text" id="mIn" placeholder="ì „ì²´ ê³µì§€ ì…ë ¥">

        <label>íŒ€ë³„ ì„œë¸Œ ê³µì§€ì‚¬í•­</label>
        <input type="text" id="sIn" placeholder="íŒ€ë³„ ì§€ì¹¨ ì…ë ¥">

        <label>ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ì•”í˜¸</label>
        <input type="password" id="pIn" placeholder="ê¸°ì¡´ ì•”í˜¸ ìœ ì§€ ì‹œ ë¹„ì›Œë‘ì„¸ìš”">

        <button onclick="saveToCloud()">ëª¨ë“  ê¸°ê¸°ì— ì „ì†¡ (ë™ê¸°í™”)</button>
        <a href="index.html" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <script>
        async function saveToCloud() {
            // ë¹ˆì¹¸ì´ ì•„ë‹ˆë©´ ì…ë ¥í•œ ê°’, ë¹ˆì¹¸ì´ë©´ ê¸°ì¡´ í´ë¼ìš°ë“œ ê°’ì„ ìœ ì§€
            const newMain = document.getElementById('mIn').value || cloudData.notice_main;
            const newSub = document.getElementById('sIn').value || cloudData.notice_sub;
            const newPass = document.getElementById('pIn').value || cloudData.sys_password;

            const newData = {
                notice_main: newMain,
                notice_sub: newSub,
                sys_password: newPass
            };

            try {
                // íŒŒì´ì–´ë² ì´ìŠ¤ í´ë¼ìš°ë“œë¡œ ë°ì´í„° ì „ì†¡ (auth.jsì— ì •ì˜ëœ DB_URL ì‚¬ìš©)
                await fetch(DB_URL, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(newData)
                });
                alert("âœ… ëª¨ë“  ìŠ¤íƒœí”„ ê¸°ê¸°ì— ê³µì§€ì™€ ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                location.reload(); // ìƒˆë¡œê³ ì¹¨
            } catch (error) {
                alert("ì„œë²„ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            }
        }
    </script>
</body>
</html>