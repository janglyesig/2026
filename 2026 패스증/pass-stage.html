<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFC PASS</title>
    <script src="auth.js"></script>
    <style>
        body { background: #0A192F; color: white; font-family: sans-serif; margin: 0; display: none; }
        body.secure-visible { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .nfc-ring { width: 180px; height: 180px; border: 2px solid #D4AF37; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: relative; }
        .nfc-ring::after { content: ""; position: absolute; width: 100%; height: 100%; border: 2px solid #D4AF37; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.6); opacity: 0; } }
        .msg { margin-top: 40px; text-align: center; }
        .msg h2 { color: #D4AF37; letter-spacing: 2px; }
        #subNoticeBox { margin-top: 20px; opacity: 0.5; font-size: 0.8rem; padding: 0 40px; }
        body.access { background: #064E3B; transition: 0.5s; }
    </style>
</head>
<body>
    <div class="nfc-ring"><span style="font-size:3rem;">ğŸ“¡</span></div>
    <div class="msg">
        <h2 id="st">ì¶œì…ì¦(NFC) íƒœê·¸</h2>
        <p id="desc">ê¸°ê¸° ë’·ë©´ì— ìŠ¤í… ì¹´ë“œë¥¼ íƒœê·¸í•˜ì„¸ìš”.</p>
    </div>
    <div id="subNoticeBox">ì§€ì¹¨ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <a href="index.html" style="position:absolute; bottom:30px; color:#666; text-decoration:none;">í™ˆìœ¼ë¡œ</a>

    <script>
        async function startNFC() {
            if ('NDEFReader' in window) {
                try {
                    const reader = new NDEFReader();
                    await reader.scan();
                    reader.onreading = ({ serialNumber }) => {
                        document.body.classList.add('access');
                        document.getElementById('st').innerText = "ìŠ¹ì¸ ì™„ë£Œ";
                        document.getElementById('desc').innerText = "ì •ìƒì ìœ¼ë¡œ ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤. (ID: "+serialNumber+")";
                        if(navigator.vibrate) navigator.vibrate(200);
                    };
                } catch (e) { document.getElementById('desc').innerText = "NFC í™œì„±í™” í•„ìš”"; }
            } else {
                document.getElementById('desc').innerText = "NFC ë¯¸ì§€ì› ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.";
                document.body.onclick = () => { document.body.classList.add('access'); document.getElementById('st').innerText="ìˆ˜ë™ ìŠ¹ì¸ë¨"; };
            }
        }
        setTimeout(startNFC, 1500);
    </script>
</body>
</html>